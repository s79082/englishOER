<html>
    <head>

        <script src="Password.js"></script>
        <script>
            //import Password from './Password.js';

            class PasswordChecker {
                constructor(text)
                {
                    this.text = text;
                }
                getChecks()
                {
                    return [{"label": "At least one Lowercase letter",
                    "checksOut":(new RegExp("[a-z]")).test(this.text)
                },
                {"label": "At least one Uppercase letter",
                    "checksOut:
                },
                {"label": "At least one Special letter",
                    "checksOut": this.hasSpecialCharacters()
                },
                {"label": "At least one Number letter",
                    "checksOut": this.hasNumbers()
                },
                {"label": "At least 6 letters",
                    "checksOut": (this.getLength() >= 6)
                }];
                }
                hasLowercase()
                {
                    return (new RegExp("[a-z]")).test(this.text);
                }
                hasUppercase()
                {
                    return (new RegExp("[A-Z]")).test(this.text);
                }
                hasSpecialCharacters()
                {
                    return (new RegExp("[$@$!%*#?&]")).test(this.text);
                }
                hasNumbers()
                {
                    return (new RegExp("[0-9]")).test(this.text);
                }
                getLength()
                {
                    return this.text.length;
                }
            }
            
            function check_password()
            {
                // the input password
                pw = document.getElementById("pw_input").value;
            
                // Class Password implements the checks
                var password = new Password(pw);
    
                result_list = document.getElementById("result_list");
                
                // removes the list elements if exists
                while (result_list.firstChild != null)
                {
                    result_list.removeChild(result_list.firstChild);
                }
    
                // here we accumulate the overall strength
                // it starts at zero
                strength_accu = 0;
    
                // for each check of this password
                // a check has a label and a value if its checks out
                password.getChecks().forEach(
                    check =>
                    {
                        // create a list item
                        item = document.createElement("LI");
                        text = document.createTextNode(check.label);

                        // calculate color and strength
                        if(check.checksOut)
                        {
                            color = "green";
                            strength_accu++;
                        }
                        else
                            color = "red";

                        // set the color of our list item
                        item.style.color = color

                        // add the text to our item
                        item.appendChild(text);

                        // add our item to the list
                        result_list.appendChild(item);
                    }
                )
                    
            }
                </script>

    </head>
<body onload="check_password()">
    <input id="pw_input" oninput="check_password()"/>
    <p id="p_txt">
        Here you can check your password for stength. Please note that all calculation is done localy and all data will stay on your device.
    </p>
    

    <button id="btn_check" value="check" onClick="check_password()" type="button">
        check
    </button>
    <ul id="result_list"></ul>
</body>
</html>
